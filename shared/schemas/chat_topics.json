{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://deskling.local/schemas/topics/chat.json",
  "title": "Chat Topics",
  "description": "Schemas for chat.* topics",
  "definitions": {
    "user_message": {
      "type": "object",
      "required": ["text"],
      "properties": {
        "text": {
          "type": "string",
          "description": "User's message text"
        },
        "context": {
          "type": "object",
          "description": "Optional conversation context"
        }
      }
    },
    "assistant_plan": {
      "type": "object",
      "required": ["plan_text", "steps", "requires_confirmation"],
      "properties": {
        "plan_text": {
          "type": "string",
          "description": "Natural language plan description"
        },
        "steps": {
          "type": "array",
          "items": {
            "type": "object",
            "required": ["description", "risk"],
            "properties": {
              "description": {"type": "string"},
              "risk": {"type": "string", "enum": ["low", "medium", "high"]},
              "tool_call": {"type": "object"}
            }
          }
        },
        "requires_confirmation": {
          "type": "boolean"
        }
      }
    },
    "assistant_message": {
      "type": "object",
      "required": ["text"],
      "properties": {
        "text": {
          "type": "string",
          "description": "Assistant's response text"
        },
        "completed_actions": {
          "type": "array",
          "items": {"type": "string"},
          "description": "Summary of completed actions"
        }
      }
    }
  }
}
